<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Storage Solutions | HomeLabWiki</title>
    <meta name="description" content="Documentation for your home infrastructure lab.">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/assets/style.2AS5QTj9.css" as="style">
    
    <script type="module" src="/assets/app.DPuASD3t.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.CVV8NEzV.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Bt53DRYp.js">
    <link rel="modulepreload" href="/assets/hardware_storage.md.DD_PS2p2.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>HomeLabWiki</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/getting-started.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Getting Started</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/network/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Network</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/services/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Services</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/hardware/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Hardware</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/troubleshooting.html" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Troubleshooting</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yourusername/homelab-wiki" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yourusername/homelab-wiki" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Hardware</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/hardware/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/hardware/server-specs.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Server Specs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/hardware/storage.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Storage</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/hardware/peripherals.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Peripherals</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _hardware_storage" data-v-39a288b8><div><h1 id="storage-solutions" tabindex="-1">Storage Solutions <a class="header-anchor" href="#storage-solutions" aria-label="Permalink to &quot;Storage Solutions&quot;">​</a></h1><p>This page documents the storage infrastructure in your home lab environment.</p><h2 id="storage-overview" tabindex="-1">Storage Overview <a class="header-anchor" href="#storage-overview" aria-label="Permalink to &quot;Storage Overview&quot;">​</a></h2><p>Your home lab employs a multi-tiered storage strategy with different solutions optimized for various workloads:</p><ol><li><strong>Primary Storage</strong>: TrueNAS Scale NAS with large ZFS pool</li><li><strong>Server Local Storage</strong>: NVMe and SAS drives for VM hosting</li><li><strong>Backup Storage</strong>: Dedicated backup server with large RAID array</li><li><strong>Archive Storage</strong>: External drives for cold storage</li></ol><h2 id="primary-storage-nas" tabindex="-1">Primary Storage (NAS) <a class="header-anchor" href="#primary-storage-nas" aria-label="Permalink to &quot;Primary Storage (NAS)&quot;">​</a></h2><h3 id="hardware" tabindex="-1">Hardware <a class="header-anchor" href="#hardware" aria-label="Permalink to &quot;Hardware&quot;">​</a></h3><ul><li><strong>System</strong>: Custom 4U Storage Server</li><li><strong>CPU</strong>: Intel Xeon E-2278G (8 cores, 16 threads)</li><li><strong>RAM</strong>: 64GB DDR4 ECC</li><li><strong>Boot Drives</strong>: 2 x 500GB Samsung 870 EVO SSD (ZFS mirror)</li><li><strong>Cache Drives</strong>: 2 x 1TB Samsung 980 Pro NVMe SSD (ZFS mirror)</li><li><strong>Data Drives</strong>: 12 x 16TB Seagate EXOS X16 Enterprise HDD</li><li><strong>HBA</strong>: LSI 9300-16i (IT mode)</li><li><strong>Network</strong>: 10GbE SFP+ primary, 2 x 1GbE secondary</li></ul><h3 id="zfs-configuration" tabindex="-1">ZFS Configuration <a class="header-anchor" href="#zfs-configuration" aria-label="Permalink to &quot;ZFS Configuration&quot;">​</a></h3><h4 id="pool-layout" tabindex="-1">Pool Layout <a class="header-anchor" href="#pool-layout" aria-label="Permalink to &quot;Pool Layout&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>main-pool (RAIDZ2)</span></span>
<span class="line"><span>├── 12 x 16TB HDDs</span></span>
<span class="line"><span>│   ├── 192TB raw capacity</span></span>
<span class="line"><span>│   └── 160TB usable capacity</span></span></code></pre></div><h4 id="dataset-structure" tabindex="-1">Dataset Structure <a class="header-anchor" href="#dataset-structure" aria-label="Permalink to &quot;Dataset Structure&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>main-pool/</span></span>
<span class="line"><span>├── media/</span></span>
<span class="line"><span>│   ├── movies/</span></span>
<span class="line"><span>│   ├── tv/</span></span>
<span class="line"><span>│   ├── music/</span></span>
<span class="line"><span>│   └── photos/</span></span>
<span class="line"><span>├── backups/</span></span>
<span class="line"><span>│   ├── server-backups/</span></span>
<span class="line"><span>│   ├── vm-backups/</span></span>
<span class="line"><span>│   └── client-backups/</span></span>
<span class="line"><span>├── documents/</span></span>
<span class="line"><span>│   ├── personal/</span></span>
<span class="line"><span>│   ├── financial/</span></span>
<span class="line"><span>│   └── projects/</span></span>
<span class="line"><span>├── vm-storage/</span></span>
<span class="line"><span>│   ├── main-server/</span></span>
<span class="line"><span>│   └── backup-server/</span></span>
<span class="line"><span>└── isos/</span></span></code></pre></div><h4 id="zfs-properties" tabindex="-1">ZFS Properties <a class="header-anchor" href="#zfs-properties" aria-label="Permalink to &quot;ZFS Properties&quot;">​</a></h4><table tabindex="0"><thead><tr><th>Dataset</th><th>Compression</th><th>Deduplication</th><th>Recordsize</th><th>Sync</th><th>Quota</th></tr></thead><tbody><tr><td>media</td><td>lz4</td><td>Off</td><td>1M</td><td>Standard</td><td>100TB</td></tr><tr><td>backups</td><td>zstd</td><td>Off</td><td>1M</td><td>Standard</td><td>40TB</td></tr><tr><td>documents</td><td>zstd</td><td>Off</td><td>128K</td><td>Always</td><td>5TB</td></tr><tr><td>vm-storage</td><td>lz4</td><td>Off</td><td>64K</td><td>Always</td><td>None</td></tr><tr><td>isos</td><td>lz4</td><td>Off</td><td>1M</td><td>Standard</td><td>1TB</td></tr></tbody></table><h3 id="performance-metrics" tabindex="-1">Performance Metrics <a class="header-anchor" href="#performance-metrics" aria-label="Permalink to &quot;Performance Metrics&quot;">​</a></h3><ul><li><strong>Sequential Read</strong>: 2.2 GB/s</li><li><strong>Sequential Write</strong>: 1.8 GB/s</li><li><strong>Random Read (4K)</strong>: 3,500 IOPS</li><li><strong>Random Write (4K)</strong>: 2,800 IOPS</li><li><strong>Network Throughput</strong>: 9.7 Gbps (10GbE)</li><li><strong>Typical Latency</strong>: 0.5-2ms</li></ul><h3 id="sharing-protocols" tabindex="-1">Sharing Protocols <a class="header-anchor" href="#sharing-protocols" aria-label="Permalink to &quot;Sharing Protocols&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Protocol</th><th>Purpose</th><th>Authentication</th><th>Encryption</th></tr></thead><tbody><tr><td>SMB/CIFS</td><td>Windows clients, general file sharing</td><td>Active Directory</td><td>Required</td></tr><tr><td>NFS</td><td>VM storage, Linux clients</td><td>IP-based</td><td>Not available</td></tr><tr><td>iSCSI</td><td>Block storage for servers</td><td>CHAP</td><td>Optional</td></tr><tr><td>S3</td><td>Object storage</td><td>API keys</td><td>Required</td></tr></tbody></table><h2 id="server-local-storage" tabindex="-1">Server Local Storage <a class="header-anchor" href="#server-local-storage" aria-label="Permalink to &quot;Server Local Storage&quot;">​</a></h2><h3 id="main-server" tabindex="-1">Main Server <a class="header-anchor" href="#main-server" aria-label="Permalink to &quot;Main Server&quot;">​</a></h3><ul><li><strong>Boot/OS</strong>: 2 x 1TB Samsung 980 Pro NVMe SSD (RAID 1)</li><li><strong>VM Storage</strong>: 4 x 4TB Seagate IronWolf Pro (RAID 10)</li><li><strong>Total Capacity</strong>: 1TB OS, 8TB VM storage</li><li><strong>Performance</strong>: <ul><li>NVMe: 6.5 GB/s read, 5.0 GB/s write</li><li>HDD RAID: 800 MB/s read, 750 MB/s write</li></ul></li></ul><h3 id="backup-server" tabindex="-1">Backup Server <a class="header-anchor" href="#backup-server" aria-label="Permalink to &quot;Backup Server&quot;">​</a></h3><ul><li><strong>Boot/OS</strong>: 2 x 500GB Samsung 870 EVO SSD (RAID 1)</li><li><strong>Backup Storage</strong>: 6 x 8TB WD Red Pro (RAID 6)</li><li><strong>Total Capacity</strong>: 500GB OS, 32TB backup storage</li><li><strong>Performance</strong>: <ul><li>SSD: 550 MB/s read, 520 MB/s write</li><li>HDD RAID: 700 MB/s read, 500 MB/s write</li></ul></li></ul><h2 id="storage-networking" tabindex="-1">Storage Networking <a class="header-anchor" href="#storage-networking" aria-label="Permalink to &quot;Storage Networking&quot;">​</a></h2><h3 id="network-topology" tabindex="-1">Network Topology <a class="header-anchor" href="#network-topology" aria-label="Permalink to &quot;Network Topology&quot;">​</a></h3><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    NAS[NAS 10GbE] --- Switch[10GbE Switch]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Switch --- MainServer[Main Server 10GbE]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Switch --- BackupServer[Backup Server 10GbE]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Switch --- Router[Router 1GbE]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Router --- ClientDevices[Client Devices]</span></span></code></pre></div><h3 id="network-performance" tabindex="-1">Network Performance <a class="header-anchor" href="#network-performance" aria-label="Permalink to &quot;Network Performance&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Connection</th><th>Theoretical Max</th><th>Actual Throughput</th><th>Latency</th></tr></thead><tbody><tr><td>NAS ↔ Main Server</td><td>10 Gbps</td><td>9.7 Gbps</td><td>0.2ms</td></tr><tr><td>NAS ↔ Backup Server</td><td>10 Gbps</td><td>9.4 Gbps</td><td>0.2ms</td></tr><tr><td>NAS ↔ Client Devices</td><td>1 Gbps</td><td>940 Mbps</td><td>0.5ms</td></tr><tr><td>Main Server ↔ Backup Server</td><td>10 Gbps</td><td>9.5 Gbps</td><td>0.2ms</td></tr></tbody></table><h2 id="backup-strategy" tabindex="-1">Backup Strategy <a class="header-anchor" href="#backup-strategy" aria-label="Permalink to &quot;Backup Strategy&quot;">​</a></h2><h3 id="backup-tiers" tabindex="-1">Backup Tiers <a class="header-anchor" href="#backup-tiers" aria-label="Permalink to &quot;Backup Tiers&quot;">​</a></h3><ol><li><strong>Tier 1</strong>: Daily incremental backups to backup server</li><li><strong>Tier 2</strong>: Weekly full backups to backup server</li><li><strong>Tier 3</strong>: Monthly archives to external storage</li><li><strong>Tier 4</strong>: Quarterly offsite backups</li></ol><h3 id="backup-software" tabindex="-1">Backup Software <a class="header-anchor" href="#backup-software" aria-label="Permalink to &quot;Backup Software&quot;">​</a></h3><ul><li><strong>VM Backups</strong>: Proxmox Backup Server</li><li><strong>File Backups</strong>: Duplicati</li><li><strong>NAS Replication</strong>: TrueNAS built-in replication</li><li><strong>Client Backups</strong>: Veeam Agent</li></ul><h3 id="retention-policy" tabindex="-1">Retention Policy <a class="header-anchor" href="#retention-policy" aria-label="Permalink to &quot;Retention Policy&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Backup Type</th><th>Retention Period</th><th>Storage Location</th></tr></thead><tbody><tr><td>Daily Incrementals</td><td>14 days</td><td>Backup Server</td></tr><tr><td>Weekly Full</td><td>8 weeks</td><td>Backup Server</td></tr><tr><td>Monthly Archives</td><td>12 months</td><td>Backup Server + External</td></tr><tr><td>Quarterly Offsite</td><td>2 years</td><td>Offsite Storage</td></tr></tbody></table><h2 id="storage-monitoring" tabindex="-1">Storage Monitoring <a class="header-anchor" href="#storage-monitoring" aria-label="Permalink to &quot;Storage Monitoring&quot;">​</a></h2><h3 id="monitoring-tools" tabindex="-1">Monitoring Tools <a class="header-anchor" href="#monitoring-tools" aria-label="Permalink to &quot;Monitoring Tools&quot;">​</a></h3><ul><li><strong>SMART Monitoring</strong>: smartd on all systems</li><li><strong>ZFS Health</strong>: TrueNAS built-in monitoring</li><li><strong>Performance Metrics</strong>: Prometheus + Grafana</li><li><strong>Capacity Trending</strong>: Custom Grafana dashboard</li><li><strong>Alerts</strong>: Email + Telegram notifications</li></ul><h3 id="alert-thresholds" tabindex="-1">Alert Thresholds <a class="header-anchor" href="#alert-thresholds" aria-label="Permalink to &quot;Alert Thresholds&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Metric</th><th>Warning Threshold</th><th>Critical Threshold</th></tr></thead><tbody><tr><td>Disk Space</td><td>80%</td><td>90%</td></tr><tr><td>SMART Errors</td><td>Any</td><td>Any</td></tr><tr><td>ZFS Scrub Errors</td><td>Any</td><td>Any</td></tr><tr><td>Read/Write Latency</td><td>10ms</td><td>20ms</td></tr><tr><td>Temperature</td><td>45°C</td><td>50°C</td></tr></tbody></table><h2 id="disaster-recovery" tabindex="-1">Disaster Recovery <a class="header-anchor" href="#disaster-recovery" aria-label="Permalink to &quot;Disaster Recovery&quot;">​</a></h2><h3 id="recovery-scenarios" tabindex="-1">Recovery Scenarios <a class="header-anchor" href="#recovery-scenarios" aria-label="Permalink to &quot;Recovery Scenarios&quot;">​</a></h3><h4 id="scenario-1-single-disk-failure" tabindex="-1">Scenario 1: Single Disk Failure <a class="header-anchor" href="#scenario-1-single-disk-failure" aria-label="Permalink to &quot;Scenario 1: Single Disk Failure&quot;">​</a></h4><ol><li>ZFS will continue to operate in degraded mode</li><li>Replace failed disk</li><li>ZFS will resilver automatically</li><li>Estimated recovery time: 24-48 hours</li></ol><h4 id="scenario-2-multiple-disk-failures-beyond-redundancy" tabindex="-1">Scenario 2: Multiple Disk Failures (Beyond Redundancy) <a class="header-anchor" href="#scenario-2-multiple-disk-failures-beyond-redundancy" aria-label="Permalink to &quot;Scenario 2: Multiple Disk Failures (Beyond Redundancy)&quot;">​</a></h4><ol><li>Restore from backup server</li><li>Prioritize critical data first</li><li>Estimated recovery time: 48-72 hours</li></ol><h4 id="scenario-3-complete-nas-failure" tabindex="-1">Scenario 3: Complete NAS Failure <a class="header-anchor" href="#scenario-3-complete-nas-failure" aria-label="Permalink to &quot;Scenario 3: Complete NAS Failure&quot;">​</a></h4><ol><li>Temporary NAS can be configured on backup server</li><li>Critical services restored from backups</li><li>New hardware acquisition and setup</li><li>Estimated recovery time: 3-5 days</li></ol><h3 id="recovery-testing" tabindex="-1">Recovery Testing <a class="header-anchor" href="#recovery-testing" aria-label="Permalink to &quot;Recovery Testing&quot;">​</a></h3><ul><li>Quarterly recovery drills</li><li>Test restoration of random files</li><li>Validate VM recovery</li><li>Document recovery time and issues</li></ul><h2 id="future-expansion-plans" tabindex="-1">Future Expansion Plans <a class="header-anchor" href="#future-expansion-plans" aria-label="Permalink to &quot;Future Expansion Plans&quot;">​</a></h2><h3 id="short-term-6-12-months" tabindex="-1">Short-term (6-12 months) <a class="header-anchor" href="#short-term-6-12-months" aria-label="Permalink to &quot;Short-term (6-12 months)&quot;">​</a></h3><ul><li>Add 4 additional 16TB drives to NAS (Q4 2025)</li><li>Upgrade NAS RAM to 128GB</li><li>Implement automated tiering between NVMe and HDD</li></ul><h3 id="long-term-1-3-years" tabindex="-1">Long-term (1-3 years) <a class="header-anchor" href="#long-term-1-3-years" aria-label="Permalink to &quot;Long-term (1-3 years)&quot;">​</a></h3><ul><li>Migrate to larger capacity drives (20TB+)</li><li>Evaluate transition to all-flash for critical workloads</li><li>Implement secondary NAS for real-time replication</li></ul><h2 id="storage-performance-tuning" tabindex="-1">Storage Performance Tuning <a class="header-anchor" href="#storage-performance-tuning" aria-label="Permalink to &quot;Storage Performance Tuning&quot;">​</a></h2><h3 id="zfs-tuning-parameters" tabindex="-1">ZFS Tuning Parameters <a class="header-anchor" href="#zfs-tuning-parameters" aria-label="Permalink to &quot;ZFS Tuning Parameters&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># ARC Size Limits</span></span>
<span class="line"><span>echo &quot;options zfs zfs_arc_min=8589934592&quot; &gt;&gt; /etc/modprobe.d/zfs.conf</span></span>
<span class="line"><span>echo &quot;options zfs zfs_arc_max=34359738368&quot; &gt;&gt; /etc/modprobe.d/zfs.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Prefetch Tuning</span></span>
<span class="line"><span>echo &quot;options zfs zfs_prefetch_disable=0&quot; &gt;&gt; /etc/modprobe.d/zfs.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Transaction Group Timeout</span></span>
<span class="line"><span>echo &quot;options zfs zfs_txg_timeout=5&quot; &gt;&gt; /etc/modprobe.d/zfs.conf</span></span></code></pre></div><h3 id="nfs-tuning" tabindex="-1">NFS Tuning <a class="header-anchor" href="#nfs-tuning" aria-label="Permalink to &quot;NFS Tuning&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># /etc/nfs.conf</span></span>
<span class="line"><span>[nfsd]</span></span>
<span class="line"><span>threads=16</span></span>
<span class="line"><span>tcp=y</span></span>
<span class="line"><span>udp=n</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[mountd]</span></span>
<span class="line"><span>manage-gids=y</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[statd]</span></span>
<span class="line"><span>port=32765</span></span>
<span class="line"><span>outgoing-port=32766</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[lockd]</span></span>
<span class="line"><span>port=32768</span></span>
<span class="line"><span>udp-port=32768</span></span></code></pre></div><h3 id="smb-tuning" tabindex="-1">SMB Tuning <a class="header-anchor" href="#smb-tuning" aria-label="Permalink to &quot;SMB Tuning&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># /etc/samba/smb.conf</span></span>
<span class="line"><span>[global]</span></span>
<span class="line"><span>socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072</span></span>
<span class="line"><span>read raw = yes</span></span>
<span class="line"><span>write raw = yes</span></span>
<span class="line"><span>server min protocol = SMB2</span></span>
<span class="line"><span>server max protocol = SMB3</span></span>
<span class="line"><span>min receivefile size = 16384</span></span>
<span class="line"><span>aio read size = 1</span></span>
<span class="line"><span>aio write size = 1</span></span>
<span class="line"><span>use sendfile = yes</span></span></code></pre></div><h2 id="storage-maintenance-schedule" tabindex="-1">Storage Maintenance Schedule <a class="header-anchor" href="#storage-maintenance-schedule" aria-label="Permalink to &quot;Storage Maintenance Schedule&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Task</th><th>Frequency</th><th>Duration</th><th>Impact</th></tr></thead><tbody><tr><td>ZFS Scrub</td><td>Monthly</td><td>24-36 hours</td><td>Minimal</td></tr><tr><td>SMART Extended Tests</td><td>Monthly</td><td>8-12 hours</td><td>None</td></tr><tr><td>Filesystem Cleanup</td><td>Quarterly</td><td>2-4 hours</td><td>None</td></tr><tr><td>Firmware Updates</td><td>As needed</td><td>1-2 hours</td><td>Downtime</td></tr><tr><td>Performance Analysis</td><td>Quarterly</td><td>2 hours</td><td>None</td></tr><tr><td>Capacity Planning</td><td>Quarterly</td><td>1 hour</td><td>None</td></tr></tbody></table></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/hardware/server-specs.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Server Specs</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/hardware/peripherals.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Peripherals</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Built with VitePress</p><p class="copyright" data-v-e315a0ad>Copyright © 2025 HomeLabWiki</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"example.md\":\"7jlA7aoj\",\"getting-started.md\":\"ndd4pM5K\",\"hardware_index.md\":\"7VIz2AnT\",\"hardware_peripherals.md\":\"UTFdEg6J\",\"hardware_server-specs.md\":\"B-9w9ble\",\"hardware_storage.md\":\"DD_PS2p2\",\"index.md\":\"C2vkUc9y\",\"network_index.md\":\"B0r2falG\",\"network_router.md\":\"Dp8ckuzs\",\"network_switch.md\":\"DkVNdnqu\",\"network_wifi.md\":\"D_GsdvQQ\",\"services_home-automation.md\":\"IyKXQBoR\",\"services_index.md\":\"Dbj2v1nG\",\"services_media-server.md\":\"DtMTRaR1\",\"services_monitoring.md\":\"DVnQYKmU\",\"troubleshooting.md\":\"D6YoCH8c\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"HomeLabWiki\",\"description\":\"Documentation for your home infrastructure lab.\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"siteTitle\":\"HomeLabWiki\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Getting Started\",\"link\":\"/getting-started\"},{\"text\":\"Network\",\"link\":\"/network/\"},{\"text\":\"Services\",\"link\":\"/services/\"},{\"text\":\"Hardware\",\"link\":\"/hardware/\"},{\"text\":\"Troubleshooting\",\"link\":\"/troubleshooting\"}],\"sidebar\":{\"/network/\":[{\"text\":\"Network\",\"items\":[{\"text\":\"Overview\",\"link\":\"/network/\"},{\"text\":\"Router Setup\",\"link\":\"/network/router\"},{\"text\":\"Switch Configuration\",\"link\":\"/network/switch\"},{\"text\":\"Wi-Fi\",\"link\":\"/network/wifi\"}]}],\"/services/\":[{\"text\":\"Services\",\"items\":[{\"text\":\"Overview\",\"link\":\"/services/\"},{\"text\":\"Media Server\",\"link\":\"/services/media-server\"},{\"text\":\"Home Automation\",\"link\":\"/services/home-automation\"},{\"text\":\"Monitoring\",\"link\":\"/services/monitoring\"}]}],\"/hardware/\":[{\"text\":\"Hardware\",\"items\":[{\"text\":\"Overview\",\"link\":\"/hardware/\"},{\"text\":\"Server Specs\",\"link\":\"/hardware/server-specs\"},{\"text\":\"Storage\",\"link\":\"/hardware/storage\"},{\"text\":\"Peripherals\",\"link\":\"/hardware/peripherals\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/yourusername/homelab-wiki\"}],\"footer\":{\"message\":\"Built with VitePress\",\"copyright\":\"Copyright © 2025 HomeLabWiki\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>